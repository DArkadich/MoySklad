# üîç –£–¥–∞–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ML –º–æ–¥–µ–ª–µ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å ML –º–æ–¥–µ–ª–µ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ —É–¥–∞–ª–µ–Ω–Ω–æ, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –≤—Ä—É—á–Ω—É—é.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
./check_ml_remote.sh denis@localhost

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø–æ IP
./check_ml_remote.sh denis@192.168.1.100

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞
./check_ml_remote.sh denis@prod-server.local
```

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∞–ª–∏–∞—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ ~/.ssh/config:
Host prod-server
    HostName 192.168.1.100
    User denis
    IdentityFile ~/.ssh/id_ed25519
    Port 22

# –ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
./check_ml_remote.sh denis@prod-server
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä—É
- –°–∫—Ä–∏–ø—Ç `check_production_ml.sh` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–µ–π:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–µ–π
ls -la ~/.ssh/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 600 ~/.ssh/id_ed25519
chmod 644 ~/.ssh/id_ed25519.pub
```

### **–¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç
ssh denis@IP_–ê–î–†–ï–° "echo '–¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è'"

# –¢–µ—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º
ssh -o ConnectTimeout=5 denis@IP_–ê–î–†–ï–° "echo '–¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è'"
```

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### **1. SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫–ª—é—á–∞–º
- –¢–∞–π–º–∞—É—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### **2. ML –º–æ–¥–µ–ª–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ**
- –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ó–¥–æ—Ä–æ–≤—å–µ ML —Å–µ—Ä–≤–∏—Å–æ–≤
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –§–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- API –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
ping IP_–ê–î–†–ï–°_–°–ï–†–í–ï–†–ê

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
ssh -v denis@IP_–ê–î–†–ï–°

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª—é—á–∞–º
ls -la ~/.ssh/
```

### **–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ifconfig | grep inet

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw status

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH —Å–µ—Ä–≤–∏—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh denis@IP_–ê–î–†–ï–° "sudo systemctl status ssh"
```

### **–û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh denis@IP_–ê–î–†–ï–° "cat ~/.ssh/authorized_keys"

# 2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id denis@IP_–ê–î–†–ï–°

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ssh denis@IP_–ê–î–†–ï–° "chmod 700 ~/.ssh && chmod 600 ~/.ssh/authorized_keys"
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
0 9 * * * cd /path/to/MoySklad && ./check_ml_remote.sh denis@prod-server >> /var/log/ml_check.log 2>&1
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
./check_ml_remote.sh denis@prod-server

# –ï—Å–ª–∏ –≤—Å–µ OK, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–µ–ø–ª–æ–π
if [ $? -eq 0 ]; then
    echo "ML –º–æ–¥–µ–ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–µ–ø–ª–æ–π"
    # ... –¥–µ–ø–ª–æ–π
else
    echo "–ü—Ä–æ–±–ª–µ–º—ã —Å ML –º–æ–¥–µ–ª—è–º–∏, –æ—Ç–º–µ–Ω—è–µ–º –¥–µ–ø–ª–æ–π"
    exit 1
fi
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
watch -n 300 './check_ml_remote.sh denis@prod-server'
```

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
ssh denis@prod-server 'cd ~/MoySklad && docker-compose logs forecast-api'
```

### **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**
```bash
ssh denis@prod-server 'cd ~/MoySklad && ./restart_system_fixed.sh'
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
```bash
ssh denis@prod-server 'cd ~/MoySklad && docker ps'
```

## üìö –°–ø—Ä–∞–≤–∫–∞

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É
./check_ml_remote.sh --help

# –ò–ª–∏
./check_ml_remote.sh -h
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∞–ª–∏–∞—Å—ã** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ cron** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
3. **–õ–æ–≥–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** SSH –∫–ª—é—á–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø—Ä–∞–≤–∫—É: `./check_ml_remote.sh --help`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
