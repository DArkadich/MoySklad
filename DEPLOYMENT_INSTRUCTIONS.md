# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é —Å–∏—Å—Ç–µ–º—ã

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**
- Docker
- Docker Compose
- Git

## üîÑ –®–∞–≥–∏ –¥–µ–ø–ª–æ—è

### **1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/DArkadich/MoySklad.git
cd MoySklad
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp env.example .env
nano .env
```

**–í —Ñ–∞–π–ª–µ .env —É–∫–∞–∂–∏—Ç–µ:**
```env
MOYSKLAD_API_TOKEN=your_actual_token_here
```

### **3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã**
```bash
chmod +x start_system_optimized.sh
./start_system_optimized.sh
```

### **4. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ML –º–æ–¥–µ–ª–µ–π**
```bash
# –ö–æ–ø–∏—Ä—É–µ–º —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker cp train_initial_models.py forecast-api:/app/

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it forecast-api python3 train_initial_models.py
```

### **5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–æ–¥–µ–ª–µ–π
curl http://localhost:8001/models/status

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
curl -X POST http://localhost:8001/forecast \
  -H "Content-Type: application/json" \
  -d '{"product_code": "12345", "forecast_days": 30}'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
# –õ–æ–≥–∏ API
docker logs forecast-api

# –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
docker logs automation-cron

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
docker-compose ps
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
```bash
docker-compose down
```

### **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**
```bash
docker-compose restart
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:**
```bash
git pull origin main
docker-compose down
docker-compose up -d --build
```

## üìà –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–æ–±—É—á–µ–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–æ–±—É—á–∞–µ—Ç –º–æ–¥–µ–ª–∏ —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ 6:00
- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `./data/`
- –û—Ç—á–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `./data/daily_report_YYYYMMDD.json`

### **–†—É—á–Ω–æ–µ –¥–æ–æ–±—É—á–µ–Ω–∏–µ:**
```bash
docker exec -it forecast-api python3 -c "
from app.incremental_learning import IncrementalModelTrainer
import asyncio
trainer = IncrementalModelTrainer()
asyncio.run(trainer.incremental_train_all_models())
"
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API
docker-compose restart forecast-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs forecast-api
```

### **–ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–µ–π
docker exec -it forecast-api ls -la /app/data/models/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
docker exec -it forecast-api python3 train_initial_models.py
```

### **–ï—Å–ª–∏ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
docker exec -it forecast-api python3 -c "
import pandas as pd
import numpy as np
from datetime import datetime, timedelta

# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
dates = pd.date_range(start='2020-01-01', end='2024-01-01', freq='D')
stock_data = pd.DataFrame({
    'date': dates,
    'product_code': '12345',
    'stock': np.random.randint(50, 200, len(dates)),
    'product_name': '–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä'
})
sales_data = pd.DataFrame({
    'date': dates,
    'product_code': '12345',
    'quantity': np.random.randint(0, 10, len(dates)),
    'product_name': '–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä'
})

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
stock_data.to_csv('/app/data/stock_history.csv', index=False)
sales_data.to_csv('/app/data/sales_history.csv', index=False)
print('–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã')
"
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```
MoySklad/
‚îú‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ start_system_optimized.sh     # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ train_initial_models.py       # –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ test_api_ml.py               # –¢–µ—Å—Ç—ã API
‚îú‚îÄ‚îÄ data/                        # –î–∞–Ω–Ω—ã–µ –∏ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/                  # –û–±—É—á–µ–Ω–Ω—ã–µ ML –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ stock_history.csv        # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö
‚îÇ   ‚îú‚îÄ‚îÄ sales_history.csv        # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö
‚îÇ   ‚îî‚îÄ‚îÄ daily_report_*.json      # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ moysklad-service/
        ‚îî‚îÄ‚îÄ app/
            ‚îú‚îÄ‚îÄ api_ml.py        # ML API
            ‚îú‚îÄ‚îÄ train_historical_models.py  # –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
            ‚îú‚îÄ‚îÄ incremental_learning.py     # –î–æ–æ–±—É—á–µ–Ω–∏–µ
            ‚îî‚îÄ‚îÄ daily_automation.py        # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### **–í—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8001
- ‚úÖ –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `/models/status`)
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `/forecast`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéØ 