# üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ML –º–æ–¥–µ–ª–µ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
./check_production_ml.sh

# –ò–ª–∏ Python —Å–∫—Ä–∏–ø—Ç
python3 check_production_ml_simple.py
```

### 2. **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —à–∞–≥–∞–º**

#### –®–∞–≥ 1: –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker ps | grep -E "(ml-service|forecast-api|moysklad-service)"
```

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ forecast-api
curl -s http://localhost:8001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ml-service
curl -s http://localhost:8002/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ moysklad-service
curl -s http://localhost:8000/health
```

#### –®–∞–≥ 3: –°—Ç–∞—Ç—É—Å –º–æ–¥–µ–ª–µ–π
```bash
curl -s http://localhost:8001/models/status
```

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it forecast-api bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
ls -la /app/data/
find /app/data/ -name "*.pkl" -o -name "*.joblib"

# –í—ã—Ö–æ–¥
exit
```

#### –®–∞–≥ 5: –¢–µ—Å—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
curl -X POST http://localhost:8001/forecast \
  -H "Content-Type: application/json" \
  -d '{"product_code":"30001","forecast_days":30}'
```

## ‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

### **ML –º–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω—ã:**
- `models_loaded > 0` –≤ health endpoint
- –§–∞–π–ª—ã `.pkl` –∏–ª–∏ `.joblib` –≤ `/app/data/`
- API –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã

### **ML —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –∑–¥–æ—Ä–æ–≤—ã
- Health endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200 OK
- –õ–æ–≥–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

## ‚ùå –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±—É—á–µ–Ω—ã

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö**
```bash
docker exec forecast-api ls -la /app/data/
```

### 2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ**
```bash
docker exec forecast-api python3 train_models_in_container.py
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è**
```bash
docker-compose logs forecast-api
```

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:**
```bash
docker-compose logs
docker-compose down && docker-compose up -d
```

### **–ú–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs forecast-api

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã
docker exec forecast-api ls -la /app/data/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose restart forecast-api
```

### **API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -tlnp | grep :8001

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs forecast-api
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–£—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```
‚úÖ ML-–ú–û–î–ï–õ–ò –û–ë–£–ß–ï–ù–´ –ò –ì–û–¢–û–í–´ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
   ‚Ä¢ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥–µ–ª–µ–π: X
   ‚Ä¢ API –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### **–ú–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:**
```
‚ö†Ô∏è ML-–°–ï–†–í–ò–°–´ –†–ê–ë–û–¢–ê–Æ–¢, –ù–û –ú–û–î–ï–õ–ò –ù–ï –ó–ê–ì–†–£–ñ–ï–ù–´
   ‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏
```

### **–°–µ—Ä–≤–∏—Å—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
```
‚ùå ML-–°–ï–†–í–ò–°–´ –ù–ï –†–ê–ë–û–¢–ê–Æ–¢
   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### **–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker: `docker --version`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å docker-compose: `docker-compose --version`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É: `./restart_system_fixed.sh`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker-compose logs`

### **–ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±—É—á–∞—é—Ç—Å—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö: `ls -la data/`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
./check_production_ml.sh

# –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
python3 check_production_ml_simple.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f forecast-api

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ ML —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart forecast-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
docker-compose ps
```
