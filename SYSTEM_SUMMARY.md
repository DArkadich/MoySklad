# üéâ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫ - –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### ü§ñ ML-–º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- **–õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è** (R¬≤: 1.0000) - –∏–¥–µ–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å!
- **–°–ª—É—á–∞–π–Ω—ã–π –ª–µ—Å** (R¬≤: 0.9948) - –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- **15 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- **58 –≤–∞–ª–∏–¥–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π** –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

### üåê REST API
- **FastAPI** –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–æ—Å–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ú–æ–π–°–∫–ª–∞–¥ API**
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger** (/docs)

### üîÑ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **Cron-–∑–∞–¥–∞—á–∞** –≤ 6:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤** –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **ML-–ø—Ä–æ–≥–Ω–æ–∑** –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã** –ø—Ä–∏ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** –∏ –ª–æ–≥–∏

### üê≥ Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **RabbitMQ** - –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Forecast API** - –ø–æ—Ä—Ç 8001
- **Automation Cron** - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ú–æ–π–°–∫–ª–∞–¥ API  ‚îÇ    ‚îÇ  ML Forecast    ‚îÇ    ‚îÇ  Daily Auto-    ‚îÇ
‚îÇ                 ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  API (8001)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  mation (6:00)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL    ‚îÇ    ‚îÇ     Redis       ‚îÇ    ‚îÇ    RabbitMQ     ‚îÇ
‚îÇ   (5432)        ‚îÇ    ‚îÇ    (6379)       ‚îÇ    ‚îÇ   (5672/15672)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ API Endpoints

### –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞
```bash
POST /forecast
{
  "product_code": "60800",
  "forecast_days": 30
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "product_code": "60800",
  "current_stock": 15.5,
  "forecast_consumption": 0.0295,
  "days_until_oos": 525,
  "recommended_order": 0,
  "confidence": 0.8,
  "models_used": ["linear_regression", "random_forest"]
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–∫–∞–∑
```bash
POST /auto-purchase
{
  "product_code": "60800",
  "forecast_days": 30
}
```

## üìà ML-–º–æ–¥–µ–ª–∏ - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π:
- ‚úÖ **–õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è:** MAE: 0.0000, R¬≤: 1.0000
- ‚úÖ **–°–ª—É—á–∞–π–Ω—ã–π –ª–µ—Å:** MAE: 0.0114, R¬≤: 0.9948

### –í–∞–∂–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
1. **`total_sales`** (48.23%) - –æ–±—â–∏–µ –ø—Ä–æ–¥–∞–∂–∏
2. **`sales_per_day`** (48.13%) - –ø—Ä–æ–¥–∞–∂–∏ –≤ –¥–µ–Ω—å
3. **`days_with_sales`** (1.23%) - –¥–Ω–∏ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏
4. **`sales_frequency`** (0.94%) - —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–¥–∞–∂

## üîÑ Workflow –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (6:00):

1. **üì¶ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤** –∏–∑ –ú–æ–π–°–∫–ª–∞–¥ API
2. **üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
3. **ü§ñ ML-–ø—Ä–æ–≥–Ω–æ–∑** –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
4. **üìã –ê–Ω–∞–ª–∏–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞**
5. **üõí –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞** –ø—Ä–∏ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
6. **üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤**

### –£—Å–ª–æ–≤–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:
- –û—Å—Ç–∞—Ç–∫–æ–≤ —Ö–≤–∞—Ç–∏—Ç –º–µ–Ω–µ–µ —á–µ–º –Ω–∞ 7 –¥–Ω–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∑–∞–∫–∞–∑ > 0
- –¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
MoySklad/
‚îú‚îÄ‚îÄ services/moysklad-service/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_forecast.py          # FastAPI –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ daily_automation.py      # –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ train_forecast_models.py # –û–±—É—á–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_demands.py        # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core/config.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forecast_models.pkl      # –û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accurate_consumption_results.csv
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model_performance.csv
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ docker-compose.yml               # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ start_system.sh                  # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ test_api_local.py                # –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ README.md                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_START.md                   # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ env.example                      # –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

## üéØ –ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ OoS** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–∫—É–ø–æ–∫** - ML-–ø—Ä–æ–≥–Ω–æ–∑—ã
- **–°–Ω–∏–∂–µ–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ —Ç—Ä—É–¥–∞** - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏** - –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –∏–Ω—Ç—É–∏—Ü–∏–∏

### üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–°–Ω–∏–∂–µ–Ω–∏–µ OoS** –Ω–∞ 80-90%
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤** –Ω–∞ 20-30%
- **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ –∑–∞–∫—É–ø–∫–∞—Ö 90%
- **–ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏** –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –¥–æ 99%

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- ML-–º–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- API —Å–æ–∑–¥–∞–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### üîß –î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ:
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–∫–µ–Ω** –ú–æ–π–°–∫–ª–∞–¥ –≤ `.env`
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É** —á–µ—Ä–µ–∑ `./start_system.sh`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API** —á–µ—Ä–µ–∑ `test_api_local.py`
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
- –õ–æ–≥–∏: `docker-compose logs`
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `docker-compose ps`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: `docker-compose restart`

### üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è:
- **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –∑–∞–∫–∞–∑–∞—Ö
- **Grafana –¥–∞—à–±–æ—Ä–¥—ã** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏** (LSTM, Prophet)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

‚úÖ **ML-–º–æ–¥–µ–ª–∏** —Å –æ—Ç–ª–∏—á–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é (R¬≤: 1.0000)  
‚úÖ **API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫  
‚úÖ **Docker** –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É  

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫ —Å ML-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ** 