# ü§ñ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫ —Å ML-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫ –≤ –ú–æ–π–°–∫–ª–∞–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–æ—Å–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **ML-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ MoySklad API
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏** —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º –ø–æ—Å—Ç–∞–≤–æ–∫ –ª–∏–Ω–∑ –∏ —Ä–∞—Å—Ç–≤–æ—Ä–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤** —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º** –ø—Ä–∏ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
- **REST API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏ –æ—Ç—á–µ—Ç—ã
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤–º–µ—Å—Ç–æ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ú–æ–π–°–∫–ª–∞–¥ API  ‚îÇ    ‚îÇ  ML Forecast    ‚îÇ    ‚îÇ  Daily Auto-    ‚îÇ
‚îÇ                 ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  API (8001)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  mation (6:00)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL    ‚îÇ    ‚îÇ     Redis       ‚îÇ    ‚îÇ    RabbitMQ     ‚îÇ
‚îÇ   (5432)        ‚îÇ    ‚îÇ    (6379)       ‚îÇ    ‚îÇ   (5672/15672)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üè∑Ô∏è –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∫—É–ø–æ–∫ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏

### üì¶ –õ–∏–Ω–∑—ã (–∫–æ–¥—ã 30—Ö—Ö—Ö—Ö, 6—Ö—Ö—Ö—Ö, 3—Ö—Ö—Ö—Ö)
- **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ:** 45 –¥–Ω–µ–π
- **–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ:** 12 –¥–Ω–µ–π
- **–î–æ—Å—Ç–∞–≤–∫–∞ —Å —Ä–∞—Å—Ç–≤–æ—Ä–∞–º–∏:** 0 –¥–Ω–µ–π (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å = 0)
- **–û–±—â–∏–π —Å—Ä–æ–∫:** 57 –¥–Ω–µ–π (–æ—Ç–¥–µ–ª—å–Ω–æ) / 82 –¥–Ω—è (—Å —Ä–∞—Å—Ç–≤–æ—Ä–∞–º–∏)

### üß™ –†–∞—Å—Ç–≤–æ—Ä—ã (–∫–æ–¥—ã 360360, 500500, 120120)
- **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ:** 45 –¥–Ω–µ–π
- **–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ:** 37 –¥–Ω–µ–π (30-45 –¥–Ω–µ–π)
- **–î–æ—Å—Ç–∞–≤–∫–∞ —Å –ª–∏–Ω–∑–∞–º–∏:** 37 –¥–Ω–µ–π
- **–û–±—â–∏–π —Å—Ä–æ–∫:** 82 –¥–Ω—è

### üí∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
- **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ª–∏–Ω–∑ = 0** –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å —Ä–∞—Å—Ç–≤–æ—Ä–∞–º–∏
- **–≠–∫–æ–Ω–æ–º–∏—è:** –¥–æ 36 –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –†–∞—Å—Ç–≤–æ—Ä—ã –∑–∞–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ 25 –¥–Ω–µ–π —Ä–∞–Ω—å—à–µ –ª–∏–Ω–∑

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- –¢–æ–∫–µ–Ω API –ú–æ–π–°–∫–ª–∞–¥
- Python 3.8+

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ:

```bash
# –¢–æ–∫–µ–Ω API –ú–æ–π–°–∫–ª–∞–¥
MOYSKLAD_API_TOKEN=your_moysklad_api_token_here

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_DB=moysklad
POSTGRES_USER=moysklad
POSTGRES_PASSWORD=moysklad123

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Redis
REDIS_URL=redis://redis:6379

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ RabbitMQ
RABBITMQ_URL=amqp://moysklad:moysklad123@rabbitmq:5672/
```

### 3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x start_system.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
./start_system.sh
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8001/health

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs forecast-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–æ–¥–µ–ª–µ–π
curl -s http://localhost:8001/models/status
```

### 5. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ MoySklad –≤–º–µ—Å—Ç–æ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö:

```bash
# –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python3 train_real_models.py

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
python3 update_api_for_real_models.py

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
./restart_system.sh
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [QUICK_REAL_DATA_SETUP.md](QUICK_REAL_DATA_SETUP.md)

## üìã API Endpoints

### –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞

```bash
# POST /forecast
curl -X POST "http://localhost:8001/forecast" \
  -H "Content-Type: application/json" \
  -d '{
    "product_code": "60800",
    "forecast_days": 30
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "product_code": "60800",
  "current_stock": 15.5,
  "forecast_consumption": 0.0295,
  "days_until_oos": 525,
  "recommended_order": 0,
  "confidence": 0.8,
  "models_used": ["linear_regression", "random_forest"],
  "product_info": {
    "type": "monthly_lenses_6",
    "description": "–ú–µ—Å—è—á–Ω—ã–µ –ª–∏–Ω–∑—ã –ø–æ 6 —à—Ç",
    "min_order": 5000,
    "multiple": 50,
    "production_days": 45,
    "delivery_days": 12,
    "total_lead_time": 57,
    "safety_stock_days": 15,
    "category": "lenses",
    "can_combine_delivery": true
  }
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏

```bash
# POST /delivery/optimize
curl -X POST "http://localhost:8001/delivery/optimize"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "optimization_result": {
    "can_combine_delivery": true,
    "lenses_count": 3,
    "solutions_count": 2,
    "delivery_savings_days": 36,
    "recommended_action": "combine_delivery",
    "optimal_order_dates": {
      "lenses_order_date": "2024-01-15",
      "solutions_order_date": "2024-01-10",
      "combined_delivery_date": "2024-03-15"
    }
  }
}
```

### –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

```bash
# GET /delivery/rules
curl http://localhost:8001/delivery/rules
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

```bash
# POST /auto-purchase
curl -X POST "http://localhost:8001/auto-purchase" \
  -H "Content-Type: application/json" \
  -d '{
    "product_code": "60800",
    "forecast_days": 30
  }'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

```bash
# GET /health
curl http://localhost:8001/health
```

## üîÑ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6:00 –∏:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏** –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ú–æ–π–°–∫–ª–∞–¥
2. **–î–µ–ª–∞–µ—Ç ML-–ø—Ä–æ–≥–Ω–æ–∑** –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
3. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏** –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤–æ–∫
4. **–°–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑—ã** –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
5. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã** –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### –û—Ç—á–µ—Ç—ã

- **–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:** `/app/data/daily_report_YYYYMMDD.json`
- **–°–≤–æ–¥–∫–∞:** `/app/data/daily_summary.json`
- **–û—Ç—á–µ—Ç –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ:** `/app/data/delivery_optimization_report.txt`
- **–õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:** `/app/data/automation.log`

## üìä ML-–º–æ–¥–µ–ª–∏

### –û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- **–õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è** (R¬≤: 1.0000)
- **–°–ª—É—á–∞–π–Ω—ã–π –ª–µ—Å** (R¬≤: 0.9948)

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ: –≥–æ–¥, –∫–≤–∞—Ä—Ç–∞–ª, –º–µ—Å—è—Ü
- –ü—Ä–æ–¥–∞–∂–∏: –æ–±—â–∏–µ –ø—Ä–æ–¥–∞–∂–∏, –ø—Ä–æ–¥–∞–∂–∏ –≤ –¥–µ–Ω—å, –¥–Ω–∏ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏
- –û—Å—Ç–∞—Ç–∫–∏: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, —Å—Ä–µ–¥–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
- –ß–∞—Å—Ç–æ—Ç–∞: —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–¥–∞–∂, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–æ–≤

## üöö –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤** —Å –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** (–ª–∏–Ω–∑—ã/—Ä–∞—Å—Ç–≤–æ—Ä—ã)
3. **–†–∞—Å—á–µ—Ç —ç–∫–æ–Ω–æ–º–∏–∏** –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞–≤–æ–∫
4. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –¥–∞—Ç** –∑–∞–∫–∞–∑–∞
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π** –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ

### –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç:
- **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ª–∏–Ω–∑ = 0** –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏
- **–≠–∫–æ–Ω–æ–º–∏—è:** –¥–æ 36 –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –¥–æ 60% —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
services/moysklad-service/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api_ml.py                    # FastAPI –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ delivery_optimizer.py        # –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ product_rules.py             # –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∫—É–ø–æ–∫ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ daily_automation.py          # –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ train_forecast_models.py     # –û–±—É—á–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ export_demands.py            # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ       ‚îî‚îÄ‚îÄ config.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ data/                            # –î–∞–Ω–Ω—ã–µ –∏ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ Dockerfile                       # Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ requirements.txt                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

```bash
# –û–±—É—á–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–µ–π
docker-compose run --rm -w /app moysklad-service python app/train_forecast_models.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
docker-compose run --rm -w /app moysklad-service python -m pytest tests/
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

```bash
# –õ–æ–≥–∏ API
docker-compose logs forecast-api

# –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
docker-compose logs automation-cron

# –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose logs postgres
```

### –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–µ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ cron –≤ `docker-compose.yml`:

```yaml
command: |
  sh -c "
    echo '0 6 * * * python /app/app/daily_automation.py >> /app/data/automation.log 2>&1' > /etc/crontabs/root &&
    crond -f -d 8
  "
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```bash
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API
docker-compose restart forecast-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs forecast-api
```

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ú–æ–π–°–∫–ª–∞–¥

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ URL API
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API

### –ü—Ä–æ–±–ª–µ–º—ã —Å ML-–º–æ–¥–µ–ª—è–º–∏

```bash
# –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
docker-compose run --rm -w /app moysklad-service python app/train_forecast_models.py
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞
docker-compose run --rm -w /app moysklad-service python app/delivery_optimizer.py
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API –ú–æ–π–°–∫–ª–∞–¥
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ú–æ–π–°–∫–ª–∞–¥ API

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
